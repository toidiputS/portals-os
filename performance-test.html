<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Oracle OS Performance Test</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: Arial, sans-serif;
            background: #000;
            color: #fff;
        }
        .test-container {
            max-width: 800px;
            margin: 0 auto;
        }
        .metric {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
        }
        .status {
            padding: 10px;
            border-radius: 4px;
            margin: 5px 0;
        }
        .good { background: rgba(0, 255, 0, 0.2); }
        .warning { background: rgba(255, 165, 0, 0.2); }
        .error { background: rgba(255, 0, 0, 0.2); }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>Oracle OS Performance Test</h1>
        <p>This page tests the performance optimizations implemented in Oracle OS.</p>
        
        <div class="metric">
            <h3>Performance Optimizations Implemented:</h3>
            <ul>
                <li>✅ Throttled mouse events (60fps limit)</li>
                <li>✅ Smart animation loop (only runs when needed)</li>
                <li>✅ Optimized collision detection (distance-based filtering)</li>
                <li>✅ Performance monitoring integration</li>
                <li>✅ Reduced wallpaper cycling frequency (60s)</li>
                <li>✅ Early returns in expensive calculations</li>
                <li>✅ Memoized position calculations</li>
            </ul>
        </div>

        <div class="metric">
            <h3>Expected Performance Improvements:</h3>
            <div class="status good">FPS: Should maintain 60fps during normal use</div>
            <div class="status good">Memory: Reduced memory usage during animations</div>
            <div class="status good">CPU: Lower CPU usage during sphere rotation</div>
            <div class="status good">Smooth: No more skipping or freezing</div>
        </div>

        <div class="metric">
            <h3>How to Test:</h3>
            <ol>
                <li>Open the main Oracle OS application: <a href="http://localhost:5176" target="_blank" rel="noopener">http://localhost:5176</a></li>
                <li>Interact with the sphere (drag to rotate)</li>
                <li>Open/close apps</li>
                <li>Monitor browser developer tools for performance</li>
                <li>Check console for performance warnings</li>
            </ol>
        </div>

        <div class="metric">
            <h3>Performance Monitoring Features:</h3>
            <ul>
                <li>FPS monitoring with warnings below 30fps</li>
                <li>Memory usage tracking (alerts above 150MB)</li>
                <li>Real-time performance metrics in console</li>
                <li>Automatic cleanup optimizations</li>
            </ul>
        </div>

        <div id="status" class="metric">
            <h3>Test Status:</h3>
            <div class="status warning">Open the main application to run performance tests</div>
        </div>
    </div>

    <script>
        // Basic performance test
        function testPerformance() {
            const start = performance.now();
            
            // Simulate some work
            for(let i = 0; i < 1000000; i++) {
                Math.sqrt(i);
            }
            
            const end = performance.now();
            const duration = end - start;
            
            const statusDiv = document.getElementById('status');
            if (duration < 100) {
                statusDiv.innerHTML = '<div class="status good">✅ JavaScript Performance: Good (' + duration.toFixed(2) + 'ms)</div>';
            } else if (duration < 200) {
                statusDiv.innerHTML = '<div class="status warning">⚠️ JavaScript Performance: Fair (' + duration.toFixed(2) + 'ms)</div>';
            } else {
                statusDiv.innerHTML = '<div class="status error">❌ JavaScript Performance: Poor (' + duration.toFixed(2) + 'ms)</div>';
            }
        }

        // Run test on load
        window.addEventListener('load', testPerformance);
    </script>
</body>
</html>
